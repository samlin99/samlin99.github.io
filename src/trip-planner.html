<template>
	<div class="divColumn" style="width:40%" aurelia-table="data.bind: trips; display-data.bind: $displayData; filters.bind: filters;">
    <table class="table table-striped">
        <tr>
            <th colspan="4">
							<input type="text" class="form-control" value.bind="filters[0].value" placeholder="Type to Search"  maxlength="20"/>
						</th>
        </tr>
				<tr>
            <td aut-sort="key:title">Title</td>
            <td aut-sort="key:dest">Destination</td>
            <td></td>
            <td></td>
        </tr>
    </table>
		<div class="divTblBody">
		<table class="table table-striped" aurelia-table="data.bind: trips; display-data.bind: $displayData; filters.bind: filters;">
				<tr repeat.for="item of $displayData" click.trigger="selectRow(item, $index)" aut-select="row.bind: item; selected-class: info" >
					<td>${item.title}</td>
					<td>${item.dest}</td>
					<td><img src="images/gmap.png" width="22" height="20" click.trigger="openMap(item.dest)"></td>
					<td><img src="images/weather.png" width="22" height="20" click.trigger="openWeather(item.dest)"></td>
				</tr>
    </table>
		</div>
		<div align="right"><button class="btn btn-default" click.trigger="resetData()">Add New Trip</button></div>
		</div>
	<div class="divColumn" style="width:30%;margin-left:10px;">
		<table class="table">
			<tr>
				<td>
					<label for="txtTitle">Title: *</label>
				</td>
				<td>
					<input type="text" id="txtTitle" class="form-control" placeholder="Title" value.bind="trip.title" maxlength="20"/>
				</td>
			</tr>				
			<tr>
				<td>
					<label for="txtDest">Destination: *</label>
				</td>
				<td>
					<input type="text" id="txtDest" class="form-control" placeholder="Destination" value.bind="trip.dest"  maxlength="18"/>
				</td>
			</tr>				
			<tr>
				<td>
					<label for="txtDest">Category:</label>
				</td>
				<td>
					<select class="select-style" value.bind="trip.category">
						<option value="business">Business</option>
						<option value="personal">Personal</option>
						<option value="interview">Interview</option>
						<option value="school">School</option>
						<option value="vacation">Vacation</option>
					</select>
				</td>
			</tr>				
			<tr>
				<td>
					<label>Start Date:</label>
				</td>
				<td>
					<div class="input-group date">
						<input type="text" class="form-control" id="txtStartDate" value.bind="trip.startDate"><span class="input-group-addon"><i class="glyphicon glyphicon-th" maxlength="10"></i></span>
					</div>
				</td>
			</tr>				
			<tr>
				<td>
					<label>End Date:</label>
				</td>
				<td>
					<div class="input-group date">
						<input type="text" class="form-control" id="txtEndDate" value.bind="trip.endDate"><span class="input-group-addon"><i class="glyphicon glyphicon-th" maxlength="10"></i></span>
					</div>
				</td>
			</tr>				
			<tr>
				<td>
					<label>Todo:</label>
				</td>
				<td><input type="text" ref="txtTodo" class="form-control" placeholder="Type todo and press enter to add" keydown.trigger="addTodo($event)" maxlength="20" />
				<div class="todoScroll">
					<ul repeat.for="item of trip.todo" class="todo">
						<li>${item}</li>
						<li><button class="btn btn-default" click.trigger="removeTodo($index)">Remove</button></li>
					</ul>
				<div>
				</td>
			</tr>
			<tr>
				<td>
					<label>Reminder:</label>
				</td>
				<td>
					<div class="input-group date">
						<input type="text" class="form-control" id="txtReminder" value.bind="trip.reminder"><span class="input-group-addon"><i class="glyphicon glyphicon-th" maxlength="10"></i></span>
					</div>				
				</td>
			</tr>				
			<tr>
				<td colspan="2" align="right">
					<button class="btn btn-default" click.trigger="save()" disabled.bind="!(trip.title && trip.dest)">Save</button>
					<button class="btn btn-default" click.trigger="cancel()" disabled.bind="!(trip.title && trip.dest)">Cancel</button>
					<button class="btn btn-default" click.trigger="deleteTrip()" disabled.bind="currentIndex == null">Delete</button>
				</td>
			</tr>				
		</table>
	</div>
</template>