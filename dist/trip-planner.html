<template><require from="./utilities"></require><div style="width:90%;margin-top:15px"><div class="form-group inputSearch"><input type="text" class="form-control" value.bind="filters[0].value" placeholder="Type to Search" maxlength="20"></div><div class="form-group inputSearch"><label for="eyeColor">Category</label><select class="form-control" value.bind="filters[1].value"><option></option><option repeat.for="catItem of category">${catItem}</option></select></div><div class="form-group inputSearch"><button class="btn btn-default" click.trigger="resetData()">Add New Trip</button> <button class="btn btn-default" click.trigger="startReminder(true)">Open Reminder</button></div></div><div class="divColumn" style="width:60%"><div class="divTblBody"><table class="table table-striped" width="90%" aurelia-table="data.bind: trips; display-data.bind: $displayData; filters.bind: filters;"><tr class="colWidth"><td aut-sort="key:title">Title</td><td aut-sort="key:dest">Dest</td><td>Duration<br>Day(s)</td><td aut-sort="key:category">Category</td><td aut-sort="key:reminder">Reminder</td><td>#<br>Todos</td><td>State</td><td></td><td></td></tr><tr class="colWidth" repeat.for="item of $displayData" click.trigger="selectRow(item, $index)" aut-select="row.bind: item; selected-class: info"><td>${item.title}</td><td>${item.dest}</td><td>${item.duration}</td><td>${item.category}</td><td>${item.reminder | dateFormat}</td><td>${item.todo.length}</td><td>${item.state | stateFormat}</td><td><img src="images/gmap.png" width="22" height="20" click.trigger="openMap(item.dest)"></td><td><img src="images/weather.png" width="22" height="20" click.trigger="openWeather(item.dest)"></td></tr></table></div></div><div class="divColumn" style="width:30%;margin-left:10px"><table class="table"><tr><td><label for="txtTitle">Title: *</label></td><td><input type="text" id="txtTitle" class="form-control" placeholder="Title" value.bind="trip.title" maxlength="20"></td></tr><tr><td><label for="txtDest">Destination: *</label></td><td><input type="text" id="txtDest" class="form-control" placeholder="Destination" value.bind="trip.dest" maxlength="18"></td></tr><tr><td><label for="txtDest">Category:</label></td><td><select class="form-control" value.bind="trip.category"><option repeat.for="catItem of category">${catItem}</option></select></td></tr><tr><td><label>Start Date:</label></td><td><div class="form-group"><div class="input-group date" id="txtStartDate"><input type="text" class="form-control"> <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span></div></div></td></tr><tr><td><label>End Date:</label></td><td><div class="form-group"><div class="input-group date" id="txtEndDate"><input type="text" class="form-control"> <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span></div></div></td></tr><tr><td><label>Todo:</label></td><td><input type="text" ref="txtTodo" class="form-control" placeholder="Type todo and press enter to add" keydown.trigger="addTodo($event)" maxlength="20"><div class="todoScroll"><ul repeat.for="item of trip.todo" class="todo"><li><input class="btn btn-default" type="checkbox" checked.bind="item.status" click.trigger="todoStatusCheck($event, item)"></li><li>${item.desc}</li><li><button class="btn btn-default" click.trigger="removeTodo($index)">Remove</button></li></ul><div></div></div></td></tr><tr><td><label>Reminder:</label></td><td><div class="input-group date" id="txtReminder"><input type="text" class="form-control"> <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span></div><div><input type="checkbox" class="form-group" checked.bind="trip.dismiss"> Dismiss</div></td></tr><tr><td colspan="2" align="right"><button class="btn btn-default" click.trigger="save()" disabled.bind="!(trip.title && trip.dest)">Save</button> <button class="btn btn-default" click.trigger="cancel()" disabled.bind="!(trip.title && trip.dest)">Cancel</button> <button class="btn btn-default" click.trigger="deleteTrip()" disabled.bind="currentIndex == null">Delete</button></td></tr></table></div></template>