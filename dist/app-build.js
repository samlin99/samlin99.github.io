"bundle";!function(){var a=System.amdDefine;a("app.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><require from="nav-bar.html"></require><require from="bootstrap/css/bootstrap.css"></require><nav-bar router.bind="router"></nav-bar><div class="page-host"><router-view></router-view></div></template>'})}(),System.register("app.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("App",d=function(){function a(){c(this,a)}return a.prototype.configureRouter=function(a,b){a.title="Aurelia",a.map([{route:["","trip-planner"],name:"trip-planner",moduleId:"trip-planner",nav:!0,title:"Trip Planner"}]),this.router=b},a}()),a("App",d)}}}),System.register("main.js",["bootstrap"],function(a,b){"use strict";function c(a){a.use.standardConfiguration().developmentLogging().plugin("aurelia-table").plugin("aurelia-dialog").plugin("aurelia-bootstrap-datepicker"),a.start().then(function(){return a.setRoot()})}return a("configure",c),{setters:[function(a){}],execute:function(){}}}),function(){var a=System.amdDefine;a("map.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><ai-dialog><ai-dialog-body><iframe width="600" height="450" frameborder="0" style="border:0" src="https://www.google.com/maps/embed/v1/place?q=${tgtLocation}&key=AIzaSyAXBonnkSHLBPO99R8hvWMzEIR6GiXWuk4" allowfullscreen></iframe></ai-dialog-body><ai-dialog-footer><button click.trigger="controller.ok(person)">Ok</button></ai-dialog-footer></ai-dialog></template>'})}(),function(){var a=System.amdDefine;a("nav-bar.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template bindable="router"><nav class="navbar navbar-default navbar-fixed-top" role="navigation"><div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#skeleton-navigation-navbar-collapse"><span class="sr-only">Toggle Navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" href="#"><i class="fa fa-home"></i> <span>${router.title}</span></a></div><div class="collapse navbar-collapse" id="skeleton-navigation-navbar-collapse"><ul class="nav navbar-nav"><li repeat.for="row of router.navigation" class="${row.isActive ? \'active\' : \'\'}"><a data-toggle="collapse" data-target="#skeleton-navigation-navbar-collapse.in" href.bind="row.href">${row.title}</a></li></ul><ul class="nav navbar-nav navbar-right"><li class="loader" if.bind="router.isNavigating"><i class="fa fa-spinner fa-spin fa-2x"></i></li></ul></div></nav></template>'})}(),function(){var a=System.amdDefine;a("trip-planner.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><div class="divColumn" style="width:60%" aurelia-table="data.bind: trips; display-data.bind: $displayData; filters.bind: filters;"><div class="inputSearch"><input type="text" class="form-control" value.bind="filters[0].value" placeholder="Type to Search" maxlength="20"></div><div class="note"><span class="bluegreen">&nbsp;&nbsp;&nbsp;&nbsp;</span> indicates redminder event</div><div class="divTblBody"><table class="table table-striped" width="90%"><tr class="colWidth"><td aut-sort="key:title">Title</td><td aut-sort="key:dest">Dest</td><td>Duration<br>Day(s)</td><td>Category</td><td>Reminder<br>Set</td><td>Todos<br>#</td><td>State</td><td></td><td></td></tr><tr class="colWidth" repeat.for="item of $displayData" click.trigger="selectRow(item, $index)" aut-select="row.bind: item; selected-class: info"><td class="${getReminderCSS(item.reminder)}">${item.title}</td><td>${item.dest}</td><td>${item.duration}</td><td>${item.category}</td><td>${item.reminder}</td><td>${item.todo.length}</td><td>${getStateStr(item.state)}</td><td><img src="images/gmap.png" width="22" height="20" click.trigger="openMap(item.dest)"></td><td><img src="images/weather.png" width="22" height="20" click.trigger="openWeather(item.dest)"></td></tr></table></div><div align="right"><button class="btn btn-default" click.trigger="resetData()">Add New Trip</button></div></div><div class="divColumn" style="width:30%;margin-left:10px"><table class="table"><tr><td><label for="txtTitle">Title: *</label></td><td><input type="text" id="txtTitle" class="form-control" placeholder="Title" value.bind="trip.title" maxlength="20"></td></tr><tr><td><label for="txtDest">Destination: *</label></td><td><input type="text" id="txtDest" class="form-control" placeholder="Destination" value.bind="trip.dest" maxlength="18"></td></tr><tr><td><label for="txtDest">Category:</label></td><td><select class="select-style" value.bind="trip.category"><option value="Business">Business</option><option value="Personal">Personal</option><option value="Interview">Interview</option><option value="School">School</option><option value="Vacation">Vacation</option></select></td></tr><tr><td><label>Start Date:</label></td><td><div class="input-group date"><input type="text" class="form-control" id="txtStartDate" value.bind="trip.startDate"><span class="input-group-addon"><i class="glyphicon glyphicon-th" maxlength="10"></i></span></div></td></tr><tr><td><label>End Date:</label></td><td><div class="input-group date"><input type="text" class="form-control" id="txtEndDate" value.bind="trip.endDate"><span class="input-group-addon"><i class="glyphicon glyphicon-th" maxlength="10"></i></span></div></td></tr><tr><td><label>Todo:</label></td><td><input type="text" ref="txtTodo" class="form-control" placeholder="Type todo and press enter to add" keydown.trigger="addTodo($event)" maxlength="20"><div class="todoScroll"><ul repeat.for="item of trip.todo" class="todo"><li><input class="btn btn-default" type="checkbox" checked.bind="item.status" click.trigger="todoStatusCheck($event, item)"></li><li>${item.desc}</li><li><button class="btn btn-default" click.trigger="removeTodo($index)">Remove</button></li></ul><div></div></div></td></tr><tr><td><label>Reminder:</label></td><td><div class="input-group date"><input type="text" class="form-control" id="txtReminder" value.bind="trip.reminder"><span class="input-group-addon"><i class="glyphicon glyphicon-th" maxlength="10"></i></span></div></td></tr><tr><td colspan="2" align="right"><button class="btn btn-default" click.trigger="save()" disabled.bind="!(trip.title && trip.dest)">Save</button> <button class="btn btn-default" click.trigger="cancel()" disabled.bind="!(trip.title && trip.dest)">Cancel</button> <button class="btn btn-default" click.trigger="deleteTrip()" disabled.bind="currentIndex == null">Delete</button></td></tr></table></div></template>'})}(),System.register("map.js",["aurelia-dialog"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g;return{setters:[function(a){d=a.DialogController}],execute:function(){a("Map",(f=e=function(){function a(b){c(this,a),this.tgtLocation="",this.controller=b,this.controller.settings.lock=!1}return a.prototype.activate=function(a){this.tgtLocation=encodeURIComponent(a)},a}(),e.inject=[d],g=f)),a("Map",g)}}}),System.register("weather.js",["aurelia-dialog","aurelia-framework"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h;return{setters:[function(a){d=a.DialogController},function(a){e=a.bindable}],execute:function(){a("Weather",(g=f=function(){function a(b){c(this,a),this.tgtLocation="",this.controller=b,this.controller.settings.lock=!1}return a.prototype.activate=function(a){var b=a.tgtLocation,c=a.lat,d=a.lot;this.tgtLocation=b,this.lat=c,this.lot=d},a}(),f.inject=[d],h=g)),a("Weather",h)}}}),System.register("trip-planner.js",["aurelia-framework","aurelia-dialog","./map","./weather"],function(a,b){"use strict";function c(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var f,g,h,i,j,k,l,m,n,o,p;return{setters:[function(a){f=a.bindable},function(a){g=a.DialogService},function(a){h=a.Map},function(a){i=a.Weather}],execute:function(){a("TripPlanner",(o=n=function(){function a(b){d(this,a),this.currentIndex=null,c(this,"tripTmp",k,this),c(this,"trip",l,this),c(this,"trips",m,this),this.filters=[{value:"",keys:["title","dest","todo"]}],this.dialogService=b,this.geocoder=new google.maps.Geocoder;var e=localStorage.getItem("tripPlannerData");e?this.trips=JSON.parse(e):this.trips=[]}return a.prototype.attached=function(){$.each(["#txtStartDate","#txtEndDate","#txtReminder"],function(a,b){$(b).datepicker({autoclose:!0,todayHighlight:!0})})},a.prototype.addTodo=function(a){return 13==a.keyCode&&this.txtTodo.value&&(this.trip.todo.push({status:!1,desc:this.txtTodo.value}),this.txtTodo.value=""),!0},a.prototype.removeTodo=function(a){this.trip.todo=this.removeArray(this.trip.todo,a)},a.prototype.selectRow=function(a,b){this.currentIndex=b,this.trip=JSON.parse(JSON.stringify(a)),this.tripTmp=a},a.prototype.cancel=function(){this.trip=JSON.parse(JSON.stringify(this.tripTmp))},a.prototype.getDays=function(a){var b=864e5,c=36e5,d=Math.floor(a/b),e=Math.floor((a-d*b)/c),f=Math.round((a-d*b-e*c)/6e4);return 60===f&&(e++,f=0),24===e&&(d++,e=0),d},a.prototype.save=function(){if(this.trip.startDate=$("#txtStartDate").val(),this.trip.endDate=$("#txtEndDate").val(),this.trip.reminder=$("#txtReminder").val(),this.trip.startDate&&this.trip.endDate&&(this.trip.duration=this.getDays(new Date(this.trip.endDate).getTime()-new Date(this.trip.startDate).getTime())),0===this.trip.todo.length)this.trip.state=0;else{var a=!0;for(var b in this.trip.todo)a&=this.trip.todo[b].status;console.log(a),this.trip.state=a?2:1}if(null==this.currentIndex)this.trips.push(this.trip),this.resetData();else for(var c in this.trip)this.tripTmp[c]=this.trip[c];localStorage.setItem("tripPlannerData",JSON.stringify(this.trips))},a.prototype.removeArray=function(a,b){return a.slice(0,b).concat(a.slice(b+1))},a.prototype.deleteTrip=function(){this.trips=this.removeArray(this.trips,this.currentIndex),this.resetData(),localStorage.setItem("tripPlannerData",JSON.stringify(this.trips))},a.prototype.openMap=function(a){this.dialogService.open({viewModel:h,model:a}).then(function(a){!a.wasCancelled})},a.prototype.openWeather=function(a){var b=this.dialogService;this.geocoder.geocode({address:a},function(c,d){if("OK"===d){var e=c[0].geometry.location.lat(),f=c[0].geometry.location.lng();b.open({viewModel:i,model:{tgtLocation:a,lat:e,lot:f}}).then(function(a){!a.wasCancelled})}else alert("Geocode was not successful for the following reason: "+d)})},a.prototype.resetData=function(){this.currentIndex=null,this.trip={title:"",dest:"",startDate:"",category:"",endDate:"",todo:[],reminder:""}},a.prototype.todoStatusCheck=function(a,b){return b.status=a.target.checked,!0},a.prototype.getStateStr=function(a){return 2===a?"Ready":1===a?"In Progress":"Created"},a.prototype.getReminderCSS=function(a){if(a){var b=this.getDays((new Date).getTime()-new Date(a).getTime());if(0==b)return"reminder"}return""},a}(),n.inject=[g],j=o,k=e(j.prototype,"tripTmp",[f],{enumerable:!0,initializer:null}),l=e(j.prototype,"trip",[f],{enumerable:!0,initializer:function(){return{state:0,title:"",dest:"",category:"",startDate:"",endDate:"",duration:0,todo:[],reminder:""}}}),m=e(j.prototype,"trips",[f],{enumerable:!0,initializer:function(){return[]}}),p=j)),a("TripPlanner",p)}}}),function(){var a=System.amdDefine;a("weather.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><ai-dialog><ai-dialog-body><iframe id="forecast_embed" type="text/html" frameborder="0" height="200" width="100%" src="https://forecast.io/embed/#lat=${lat}&lon=${lot}&name=${tgtLocation}"></iframe></ai-dialog-body><ai-dialog-footer><button click.trigger="controller.ok(person)">Ok</button></ai-dialog-footer></ai-dialog></template>'})}();